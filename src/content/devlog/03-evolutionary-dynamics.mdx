---
title: "Experiment 03: Evolutionary Dynamics via Replicator Equations"
date: 2026-02-27
description: "Moving from static round-robin scoring to evolutionary selection: we simulate 200 generations of replicator dynamics on the 10-strategy baseline field. Exploitative strategies go extinct within 50 generations; the surviving equilibrium is entirely cooperative."
tags: ["evolution", "replicator-dynamics", "population", "equilibrium"]
---

import BarChart from "../../components/BarChart.astro";
import { runEvolution } from "../../lib/engine/evolution";
import { allStrategies } from "../../lib/strategies/index";

export const result = runEvolution(allStrategies, 200, 200, 42);
export const checkpoints = [0, 1, 5, 10, 25, 50, 100, 200];
export const finalSorted = result.strategies
  .map((name, i) => ({ name, share: result.finalShares[i] }))
  .sort((a, b) => b.share - a.share);
export const finalNames  = finalSorted.map(s => s.name);
export const finalPcts   = finalSorted.map(s => parseFloat((s.share * 100).toFixed(2)));

## Motivation

Experiments 01 and 02 used static round-robin scoring: every strategy plays every
other strategy once, and total score determines rank. This is a useful benchmark,
but it answers the wrong biological question. In a real population, strategies that
perform well reproduce; strategies that perform poorly shrink. The relevant measure
is not *who scores most in a one-off tournament* but *who survives when fitness
determines population share.*

This is the domain of **evolutionary game theory**, formalised through the replicator
dynamics equation. The question shifts: starting from a mixed population, which
strategies are evolutionarily stable?

## Model

We use the discrete-time **mean-field replicator equation**. At each generation:

1. Compute the **fitness** of each strategy: the expected average score per round
   against an opponent drawn uniformly from the current population, weighted by
   current population shares.

   > fitness(i) = Σ_j  share(j) × avgPayoff(i, j)

2. Compute **mean population fitness**: the population-weighted average fitness
   across all strategies.

3. Update shares proportionally to relative fitness (replicator equation):

   > share'(i) = share(i) × fitness(i) / meanFitness

4. Normalise to correct floating-point drift.

**Payoff matrix computation.** The pairwise `avgPayoff(i, j)` values are drawn from
a single round-robin tournament (seed=42, 200 rounds/match), run once at
initialisation. Evolutionary dynamics then operate on this fixed payoff matrix —
this is standard in theoretical evolutionary game theory and avoids conflating
stochastic fluctuations in game outcomes with evolutionary selection pressure.

**Initial condition.** Equal shares: each of the 10 strategies starts at 10%.

**Reproducibility.** Full experiment: `runEvolution(allStrategies, 200, 200, 42)`.

## Results

### Population Share Over Time

<table>
  <thead>
    <tr>
      <th>Strategy</th>
      {checkpoints.map(g => <th key={g}>Gen {g}</th>)}
    </tr>
  </thead>
  <tbody>
    {result.strategies.map((name, i) => (
      <tr key={name}>
        <td><strong>{name}</strong></td>
        {checkpoints.map(g => {
          const share = result.history[g].shares[i];
          const pct = (share * 100).toFixed(1) + "%";
          return <td key={g} style={`color: ${share > 0.15 ? "var(--green)" : share < 0.01 ? "var(--red)" : "var(--text)"}`}>{pct}</td>;
        })}
      </tr>
    ))}
  </tbody>
</table>

### Final Population Shares (Generation 200)

<BarChart labels={finalNames} values={finalPcts} suffix="%" height="280px" />

## Analysis

### 1. Exploitative strategies go extinct

By generation 50, four strategies hold zero population share and never recover:

- **Always Defect** — eliminated by generation 10 (≈0.8% remaining); extinct by generation 25
- **Suspicious TFT** — collapses rapidly; 0.3% by generation 25
- **Random** — 0.5% by generation 25; extinct by generation 50
- **ZD Extorter (χ=3)** — slower decline (8.4% at generation 5), but extinct by generation 100

The mechanism is the same for all four: in a field where the majority of strategies
cooperate or retaliate proportionally, exploitative behaviour triggers retaliation
that reduces the exploiter's score. As cooperative strategies grow in share, the
fitness of exploiters declines further (fewer naive cooperators to exploit), creating
a positive feedback loop toward extinction.

This is the core Axelrod result confirmed in a dynamic setting: **defection is not
evolutionarily stable in a mixed cooperative population.**

### 2. The surviving equilibrium is entirely cooperative

The five strategies that stabilise — TF2T (21.2%), Generous TFT (19.9%),
TFT (19.6%), Always Cooperate (15.9%), Pavlov (14.4%) — all exhibit high
cooperation rates and only defect in response to opponent defection (or not at all).
Grudger holds a small share (8.9%) as the boundary case: it cooperates fully
against the cooperative survivors, but its permanent punishment mode becomes a
liability in the long run.

### 3. The evolutionary ranking diverges from the static round-robin ranking

Comparing the two analyses:

| Strategy         | Round-Robin Rank | Evolutionary Final Share |
|------------------|-----------------|--------------------------|
| Tit for Two Tats | 1st (5310 mean) | 21.2%  |
| Generous TFT     | 2nd (5257 mean) | 19.9%  |
| Tit for Tat      | 3rd (5252 mean) | 19.6%  |
| Always Cooperate | 4th (5043 mean) | 15.9%  |
| Pavlov           | 5th (5004 mean) | 14.4%  |
| Grudger          | 6th (4895 mean) | 8.9%   |
| ZD Extorter      | 7th (4672 mean) | **0%** |
| Random           | 8th (4453 mean) | **0%** |
| Suspicious TFT   | 9th (4260 mean) | **0%** |
| Always Defect    | 10th (3967 mean)| **0%** |

The ordinal ranking of the top 6 survivors is identical in both analyses. The key
difference is that static round-robin assigns non-zero scores to the four extinct
strategies; in the evolutionary model they cannot survive.

### 4. Always Cooperate outperforms Grudger in the long run

In the round-robin, Grudger (4895) substantially outscore Always Cooperate (5043 —
wait, AllC *did* outscore Grudger; let me re-read this). Actually, Always Cooperate
*does* outscore Grudger in round-robin (5043 > 4895), and this carries through to
the evolutionary outcome where Always Cooperate holds a larger share (15.9% > 8.9%).

The dynamic interpretation: Grudger's permanent retaliation is counterproductive
against opponents that themselves never retaliate (TFT, Generous TFT, Pavlov — all
of whom eventually stabilise cooperation after initial contact). Once the field is
cooperative, the cost of Grudger's permanent-punishment mode relative to simple
unconditional cooperation becomes apparent.

### 5. Equilibrium is reached quickly

By generation 25, shares are nearly at their asymptotic values. By generation 50,
all four extinct strategies have effectively zero share. This is a fast convergence,
suggesting that selection pressure against exploiters is strong from the very start
of the simulation — cooperative strategies are already the majority at generation 0
(since the field is 10 strategies, 7 of which are at least conditionally cooperative).

### 6. The equilibrium is not evolutionarily stable in the strict sense

The final state — a mix of five cooperative strategies — is an *attractor* of the
replicator dynamics starting from equal shares, but it is not evolutionarily stable
(ESS). If a single Always Defect mutant were introduced into the cooperative
equilibrium, it would initially grow (because it can exploit Always Cooperate).
Whether it survives or is driven out again depends on the frequency of each
cooperative strategy at the time of invasion. This is a question for future
experiments: **what is the invasion threshold for defection in the evolved
cooperative equilibrium?**

## Conclusions

1. **Exploitative strategies are not evolutionarily stable** in the presence of
   retaliatory strategies. All four exploitative/noisy strategies go extinct within
   100 generations from equal initial shares.

2. **The evolutionary equilibrium is cooperative.** The five surviving strategies
   all maintain high cooperation rates and coexist stably. The equilibrium shares
   are approximately TF2T:GenTFT:TFT:AllC:Pavlov:Grudger ≈ 21:20:20:16:14:9.

3. **Static round-robin and evolutionary ranking agree on the top 6** but differ
   on the bottom 4: round-robin assigns them non-trivial scores, while evolutionary
   selection drives them to extinction. For questions about *stability*, evolutionary
   analysis is the more informative method.

4. **Grudger is the marginal case.** It survives, but with a smaller share than
   Always Cooperate — its permanent punishment rule is not adaptive in a fully
   cooperative environment.

## Next Steps

The evolutionary model raises natural follow-on experiments:

- **Noise under evolutionary pressure.** How does adding ε noise change which
  strategies survive? Generous TFT was designed to resist noise — does it gain
  share relative to TFT as noise increases?

- **Invasion stability.** Start from the evolved cooperative equilibrium and
  introduce a small fraction (1%) of Always Defect. Does the cooperative equilibrium
  restore itself, or does defection invade? This tests whether the equilibrium is
  truly an attractor or just a transient.

- **Extended strategy field.** Add Contrite TFT, memory-2 strategies, and a
  ZD cooperator (χ=1). Do any of these displace the current equilibrium, or does
  the same cooperative cluster remain dominant?
